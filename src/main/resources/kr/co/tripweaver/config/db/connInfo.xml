<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="connInfoSQL">
	
	<insert id="insertConnInfo" parameterType="connStatVo">
		INSERT INTO conninformation
		VALUES (#{mem_id}, 
				#{conn_time}, 
				#{conn_browser}, 
				#{conn_os}, 
				#{conn_divice}, 
				#{conn_ip}, 
				#{conn_ref})
	</insert>
	
	<select id="selectConnInfo" parameterType="Map" resultType="connStatVo">
		SELECT * 
		FROM (SELECT ROWNUM AS rnum, c.*
		      FROM (SELECT *
		            FROM conninformation
		            ORDER BY conn_time DESC, mem_id) c)
		WHERE rnum BETWEEN (${pageVO.page}*${pageVO.pageSize})-(${pageVO.pageSize}-1) AND ${pageVO.page}*${pageVO.pageSize}
	</select>
	
	<select id="getTotalPageCount" resultType="int">
		SELECT CEIL(COUNT(*) / 10) FROM conninformation
	</select>
</mapper>